{% extends "base.html" %} {% block content %}
<h2>{{ server_name }}</h2>

<div class="tabs">
  <button class="tab-button active" data-tab="movies">
    Movies<br /><span class="count">{{ movie_count }} titles</span>
  </button>
  <button class="tab-button" data-tab="shows">
    TV Shows<br /><span class="count">{{ show_count }} series</span>
  </button>
</div>

<div class="controls">
  <label>
    Search:
    <input id="search" type="text" placeholder="Search..." />
  </label>
  <label>
    Sort by:
    <select id="sort">
      <option value="title">Title (A-Z)</option>
      <option value="title-desc">Title (Z-A)</option>
      <option value="year">Year (Newest)</option>
      <option value="year-asc">Year (Oldest)</option>
      <option value="size">Size (Largest)</option>
      <option value="size-asc">Size (Smallest)</option>
    </select>
  </label>
  <label>
    Genre:
    <select id="genre">
      <option value="">All</option>
      {% for genre in genres %}
      <option value="{{ genre }}">{{ genre }}</option>
      {% endfor %}
    </select>
  </label>
  <label>
    Year:
    <select id="year">
      <option value="">All</option>
      {% for year in years %}
      <option value="{{ year }}">{{ year }}</option>
      {% endfor %}
    </select>
  </label>
</div>

<div id="movies" class="tab-content active">
  <div class="grid">
    {% for item in movies %}
    <div
      class="card clickable"
      data-title="{{ item.title }}"
      data-year="{{ item.year }}"
      data-size="{{ item.size / (1024*1024*1024) }}"
      data-genres="{{ item.genres | join(',') }}"
    >
      <img src="{{ item.poster_path }}" alt="{{ item.title }}" />
      <h3>{{ item.title }}</h3>
      <p>{{ item.year }}</p>
      <p>{{ (item.size / (1024*1024*1024)) | round(2) }} GB</p>
      <p
        style="
          margin-top: 0.5em;
          display: flex;
          flex-wrap: wrap;
          gap: 0.3em;
          justify-content: space-evenly;
        "
      >
        {% for genre in item.genres %}
        <span class="badge genre-{{ genre|replace(' ', '_')|lower }}"
          >{{ genre }}</span
        >
        {% endfor %}
      </p>
      <div
        class="hidden-details"
        style="display: none"
        data-title="{{ item.title }}"
        data-year="{{ item.year }}"
        data-directors="{{ item.directors | join(', ') }}"
        data-rating="{{ item.official_rating or item.community_rating }}"
        data-runtime="{{ item.runtime_ticks }}"
        data-description="{{ item.overview }}"
      ></div>
    </div>
    {% endfor %}
  </div>
</div>

<div id="shows" class="tab-content">
  <div class="grid">
    {% for item in shows %}
    <div
      class="card clickable"
      data-title="{{ item.title }}"
      data-year="{{ item.year }}"
      data-size="{{ item.size / (1024*1024*1024) }}"
      data-genres="{{ item.genres | join(',') }}"
    >
      <img src="{{ item.poster_path }}" alt="{{ item.title }}" />
      <h3>{{ item.title }}</h3>
      <p>{{ item.year }}</p>
      <p>{{ (item.size / (1024*1024*1024)) | round(2) }} GB</p>
      <p
        style="
          margin-top: 0.5em;
          display: flex;
          flex-wrap: wrap;
          gap: 0.3em;
          justify-content: space-evenly;
        "
      >
        {% for genre in item.genres %}
        <span class="badge genre-{{ genre|replace(' ', '_')|lower }}"
          >{{ genre }}</span
        >
        {% endfor %}
      </p>
      <p class="dimmed">
        {{ item.season_count }} season{{ 's' if item.season_count != 1 else ''
        }}, {{ item.episode_count }} episode{{ 's' if item.episode_count != 1
        else '' }}
      </p>
      <div
        class="hidden-details"
        style="display: none"
        data-title="{{ item.title }}"
        data-year="{{ item.year }}"
        data-directors="{{ item.directors | join(', ') }}"
        data-rating="{{ item.official_rating or item.community_rating }}"
        data-runtime="{{ item.runtime_ticks }}"
        data-description="{{ item.overview }}"
      ></div>
    </div>
    {% endfor %}
  </div>
</div>

<div id="modal" class="modal">
  <div class="modal-content">
    <span class="close-button">Ã—</span>
    <h3 id="modal-title"></h3>
    <p id="modal-year"></p>
    <p id="modal-director"></p>
    <p id="modal-rating"></p>
    <p id="modal-runtime"></p>
    <p id="modal-description"></p>
  </div>
</div>

<script src="static/script.js"></script>
{% endblock %}
